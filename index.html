<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2026 Bridges Gala - Sponsor Pledge Form</title>
  <link rel="icon" href="https://bridgeshq.blob.core.windows.net/logo/Bridges-Logo-MarriottTagline.png" />
  <!-- Brand font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              DEFAULT: '#00AAA6',
              dark: '#008C89',
              ink: '#0F172A',
            }
          },
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'Apple Color Emoji', 'Segoe UI Emoji'],
          }
        }
      }
    }
  </script>
  <style>
    :root{
      --brand: #00AAA6;
      --brand-dark: #008C89;
      --brand-ink: #0F172A;
    }
    html,body{ font-family: Inter, ui-sans-serif, system-ui, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji; }
    .card{ box-shadow: 0 1px 2px rgba(16,24,40,.04), 0 1px 1px rgba(16,24,40,.04); }

    /* Slide panel animations */
    .slide-panel {
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
    }
    .slide-panel.open {
      transform: translateX(0);
    }
    .slide-overlay {
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
      pointer-events: none;
    }
    .slide-overlay.open {
      opacity: 1;
      pointer-events: auto;
    }
    /* Mobile: full-screen slide panel */
    @media (max-width: 640px) {
      .slide-panel {
        max-width: 100% !important;
        width: 100% !important;
      }
    }
  </style>

  <!-- React 18 + ReactDOM (UMD) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script>
    // API configuration
    const host = location.hostname;
    const isLocal = (host === "localhost" || host === "127.0.0.1");
    const API_BASE = isLocal
      ? "http://localhost:4242"
      : "https://bridges-donation-backend-b2cfejegfjgcc6f6.eastus2-01.azurewebsites.net";
  </script>
</head>
<body class="bg-neutral-50">
  <!-- Thin brand bar -->
  <div class="h-1 w-full bg-brand"></div>

<!-- HERO -->
<section class="max-w-6xl mx-auto grid md:grid-cols-2 gap-6 items-center px-4 py-10">
  <!-- Left: Image -->
  <img
    src="https://bridgeshq.blob.core.windows.net/bridgeslogo/_JRH1288.jpg"
    alt="Bridges From School to Work gala stage presentation"
    class="w-full rounded-2xl shadow-lg object-cover aspect-[3/2]"
    width="3000" height="2000"
    loading="eager"
    decoding="async"
  />

  <!-- Right: Centered Branding -->
  <div class="flex flex-col items-center justify-center text-center space-y-4">
    <img
      src="https://bridgeshq.blob.core.windows.net/logo/Bridges-Logo-MarriottTagline.png"
      alt="Bridges from School to Work"
      class="h-auto"
      style="width: 180px;"
    />
    <h2 class="text-3xl sm:text-4xl font-semibold text-brand-ink">
      Sponsor Pledge Form
    </h2>
    <p class="text-sm text-neutral-600">
      Monday, June 22, 2026 | Marriott Marquis | Washington, DC
    </p>
    <p class="text-xs text-neutral-500">
      6PM Reception | 7PM Dinner & Program | 9PM Afterglow Reception
    </p>
  </div>
</section>

<!-- Separator -->
<hr class="max-w-6xl mx-auto border-t border-neutral-200 my-4" />

<!-- React app mount -->
<div id="root"></div>

<script type="text/babel">
  const { useMemo, useState, useEffect, useCallback } = React;

  // Sponsorship tier benefits from 2026 Registration Packet
  const TIER_BENEFITS = {
    'Champion': {
      amount: 75000,
      benefits: [
        'VIP Reception accommodations for 30 guests',
        'Dinner accommodations for 30 guests with premier seating',
        'Featured signage at registration, VIP Reception, and General Reception',
        'Dinner recognition from stage and digital display',
        'Dedicated pre-event spotlight communication',
        'Logo display on table(s)',
        'Recognition in the event invitation and event program',
        'Logo placement on the event website\'s sponsor page',
        'Special recognition on social media platforms',
        'Opportunity for meet and greet with Mr. Richard Marriott and featured gala speakers',
        'List a top executive on the Bridges Gala Committee',
      ]
    },
    'Premier': {
      amount: 50000,
      benefits: [
        'VIP Reception accommodations for 20 guests',
        'Dinner accommodations for 20 guests with premier seating',
        'Featured signage at VIP Reception and General Reception',
        'Dinner recognition from stage and digital display',
        'Dedicated pre-event spotlight communication',
        'Logo display on table(s)',
        'Recognition in the event invitation and event program',
        'Logo placement on the event website\'s sponsor page',
        'Special recognition on social media platforms',
        'List a top executive on the Bridges Gala Committee',
      ]
    },
    'Leadership Circle': {
      amount: 35000,
      benefits: [
        'VIP Reception accommodations for 10 guests',
        'Dinner accommodations for 10 guests',
        'Featured signage at VIP Reception',
        'Dinner recognition from stage and digital display',
        'Logo display on table',
        'Dedicated pre-event spotlight communication',
        'Recognition in event invitation, event program, and on the gala website',
        'List a top executive on the Bridges Gala Committee',
      ]
    },
    'Partner': {
      amount: 17500,
      benefits: [
        'General Reception accommodations for 10 guests',
        'Dinner accommodations for 10 guests',
        'Featured signage at General Reception',
        'Dinner logo recognition on digital display',
        'Recognition in event invitation, event program, and on the gala website',
      ]
    },
    'Benefactor': {
      amount: 12500,
      benefits: [
        'General Reception accommodations for 10 guests',
        'Dinner accommodations for 10 guests',
        'Recognition in event invitation, event program, and on the gala website',
      ]
    },
    'Individual Ticket': {
      amount: 1500,
      perTicket: true,
      benefits: [
        'General Reception accommodations for one guest',
        'Dinner accommodations for one guest',
      ]
    },
    'Donation': {
      amount: 0,
      customAmount: true,
      benefits: [
        'Fully tax-deductible contribution to support Bridges\' mission',
        'Help young adults with disabilities find meaningful employment',
      ]
    },
  };

  const TIERS = Object.keys(TIER_BENEFITS);

  const PAYMENT_OPTIONS = [
    { id: 'check', label: 'Check (Payable to: Bridges from School to Work)' },
    { id: 'credit_card', label: 'Credit Card (via gala.bridgestowork.org)' },
    { id: 'wire_stock', label: 'Wire or Stock Transfer' },
    { id: 'invoice', label: 'Request an Invoice' },
  ];

  const US_STATES = [
    'AL','AK','AZ','AR','CA','CO','CT','DE','FL','GA','HI','ID','IL','IN','IA','KS','KY','LA','ME','MD',
    'MA','MI','MN','MS','MO','MT','NE','NV','NH','NJ','NM','NY','NC','ND','OH','OK','OR','PA','RI','SC',
    'SD','TN','TX','UT','VT','VA','WA','WV','WI','WY','DC'
  ];

  function currency(n) {
    return n.toLocaleString(undefined, { style: "currency", currency: "USD", maximumFractionDigits: 0 });
  }

  function SponsorPledgeForm() {
    // Tier selection
    const [selectedTier, setSelectedTier] = useState(null);
    const [ticketQty, setTicketQty] = useState(1);
    const [donationAmount, setDonationAmount] = useState('');
    const [showBenefits, setShowBenefits] = useState(null);

    // Contact details
    const [companyOrg, setCompanyOrg] = useState('');
    const [sponsorshipName, setSponsorshipName] = useState('');
    const [sponsorshipNameManuallyEdited, setSponsorshipNameManuallyEdited] = useState(false);
    const [primaryContact, setPrimaryContact] = useState('');
    const [title, setTitle] = useState('');
    const [streetAddress, setStreetAddress] = useState('');
    const [city, setCity] = useState('');
    const [state, setState] = useState('');
    const [zip, setZip] = useState('');
    const [email, setEmail] = useState('');
    const [phone, setPhone] = useState('');
    const [paymentContactName, setPaymentContactName] = useState('');
    const [paymentContactEmail, setPaymentContactEmail] = useState('');

    // Payment option
    const [paymentOption, setPaymentOption] = useState('');

    // Comparison modal
    const [showComparison, setShowComparison] = useState(false);

    // Form state
    const [isSubmitting, setIsSubmitting] = useState(false);
    const [submitError, setSubmitError] = useState(null);
    const [submitSuccess, setSubmitSuccess] = useState(false);
    const [touchedFields, setTouchedFields] = useState({});

    const handleBlur = (field) => () => setTouchedFields(prev => ({ ...prev, [field]: true }));

    // Phone number formatting function
    const formatPhoneNumber = (value) => {
      const digits = value.replace(/\D/g, '');
      if (digits.length === 0) return '';
      if (digits.length <= 3) return `(${digits}`;
      if (digits.length <= 6) return `(${digits.slice(0,3)}) ${digits.slice(3)}`;
      return `(${digits.slice(0,3)}) ${digits.slice(3,6)}-${digits.slice(6,10)}`;
    };

    const handlePhoneChange = (e) => {
      const formatted = formatPhoneNumber(e.target.value);
      setPhone(formatted);
    };

    // Auto-fill sponsorship name from company (if not manually edited)
    const handleCompanyChange = (e) => {
      const newValue = e.target.value;
      setCompanyOrg(newValue);
      if (!sponsorshipNameManuallyEdited) {
        setSponsorshipName(newValue);
      }
    };

    const handleSponsorshipNameChange = (e) => {
      setSponsorshipName(e.target.value);
      setSponsorshipNameManuallyEdited(true);
    };

    // Prevent body scroll when panel or modal is open
    useEffect(() => {
      if (showBenefits || showComparison) {
        document.body.style.overflow = 'hidden';
      } else {
        document.body.style.overflow = '';
      }
      return () => { document.body.style.overflow = ''; };
    }, [showBenefits, showComparison]);

    // Escape key to close panel or modal
    useEffect(() => {
      const handleKeyDown = (e) => {
        if (e.key === 'Escape') {
          if (showBenefits) setShowBenefits(null);
          if (showComparison) setShowComparison(false);
        }
      };
      document.addEventListener('keydown', handleKeyDown);
      return () => document.removeEventListener('keydown', handleKeyDown);
    }, [showBenefits, showComparison]);

    // Track if form has unsaved changes
    const hasUnsavedChanges = useMemo(() => {
      return Boolean(
        selectedTier || companyOrg || sponsorshipName || primaryContact || title ||
        streetAddress || city || state || zip || email || phone ||
        paymentContactName || paymentContactEmail || paymentOption ||
        (donationAmount && donationAmount !== '') || ticketQty > 1
      );
    }, [selectedTier, companyOrg, sponsorshipName, primaryContact, title, streetAddress, city, state, zip, email, phone, paymentContactName, paymentContactEmail, paymentOption, donationAmount, ticketQty]);

    // Warn before leaving with unsaved data
    useEffect(() => {
      const handleBeforeUnload = (e) => {
        if (hasUnsavedChanges && !submitSuccess) {
          e.preventDefault();
          e.returnValue = '';
          return '';
        }
      };
      window.addEventListener('beforeunload', handleBeforeUnload);
      return () => window.removeEventListener('beforeunload', handleBeforeUnload);
    }, [hasUnsavedChanges, submitSuccess]);

    // Today's date for display
    const todayFormatted = useMemo(() => {
      return new Date().toLocaleDateString('en-US', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
      });
    }, []);

    // Validation
    const emailValid = useMemo(() => /.+@.+\..+/.test(email), [email]);
    const phoneValid = useMemo(() => /[0-9]{7,}/.test(phone.replace(/\D/g, "")), [phone]);
    const paymentEmailValid = useMemo(() => !paymentContactEmail || /.+@.+\..+/.test(paymentContactEmail), [paymentContactEmail]);

    // Calculate total
    const totalAmount = useMemo(() => {
      if (!selectedTier) return 0;
      const tierData = TIER_BENEFITS[selectedTier];
      if (tierData.perTicket) return tierData.amount * Math.max(1, ticketQty);
      if (tierData.customAmount) {
        const val = parseFloat(donationAmount.replace(/[^0-9.]/g, ''));
        return isFinite(val) ? Math.max(0, Math.floor(val)) : 0;
      }
      return tierData.amount;
    }, [selectedTier, ticketQty, donationAmount]);

    const canSubmit = useMemo(() => {
      const requiredOk = Boolean(
        companyOrg && sponsorshipName && primaryContact && streetAddress && city && state && zip && email && phone && paymentOption
      );
      const tierOk = selectedTier && (totalAmount > 0 || selectedTier === 'Donation');
      return requiredOk && tierOk && emailValid && phoneValid && paymentEmailValid && !isSubmitting;
    }, [companyOrg, sponsorshipName, primaryContact, streetAddress, city, state, zip, email, phone, paymentOption, selectedTier, totalAmount, emailValid, phoneValid, paymentEmailValid, isSubmitting]);

    function resetTierExtras(tier) {
      setSelectedTier(tier);
      if (tier !== 'Individual Ticket') setTicketQty(1);
      if (tier !== 'Donation') setDonationAmount('');
    }

    async function onSubmit(e) {
      e.preventDefault();
      if (!canSubmit || isSubmitting) return;

      setIsSubmitting(true);
      setSubmitError(null);

      try {
        const today = new Date().toLocaleDateString('en-US', {
          year: 'numeric', month: 'long', day: 'numeric'
        });

        const pledgeData = {
          tierLabel: selectedTier,
          amount: totalAmount,
          quantity: selectedTier === 'Individual Ticket' ? ticketQty : 1,
          companyOrg,
          sponsorshipName,
          primaryContact,
          title,
          streetAddress,
          city,
          state,
          zip,
          email,
          phone,
          paymentContactName: paymentContactName || null,
          paymentContactEmail: paymentContactEmail || null,
          paymentOption,
          pledgeDate: today,
        };

        const res = await fetch(`${API_BASE}/submit-gala-pledge`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(pledgeData),
        });

        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'Failed to submit pledge');

        // Redirect to thank-you page on success
        window.location.href = 'thank-you.html';
      } catch (err) {
        console.error("Pledge submission error:", err);
        setSubmitError(err.message || "An error occurred. Please try again.");
        setIsSubmitting(false);
      }
    }

    return (
      <div className="min-h-screen bg-neutral-50">
        <main className="max-w-4xl mx-auto px-4 py-8">
          <div className="bg-white rounded-2xl border border-neutral-200 p-6 sm:p-8 card">
            {/* Today's Date */}
            <div className="mb-6 flex items-center gap-2 text-sm text-neutral-500">
              <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <span>Today's Date: <strong className="text-neutral-700">{todayFormatted}</strong></span>
            </div>

            <p className="text-neutral-600 mb-8">
              Become a sponsor of the 2026 Bridges Gala. Complete the fields below and select the sponsorship level you would like to support. Our Bridges Gala team will be in touch to coordinate your sponsorship benefits and payment.
            </p>

            <form onSubmit={onSubmit} className="space-y-8">
              {/* Sponsorship Level Selection */}
              <section className="space-y-4">
                <div className="flex items-center justify-between">
                  <h2 className="text-lg font-semibold text-brand-ink">Sponsorship Level</h2>
                  <button
                    type="button"
                    onClick={() => setShowComparison(true)}
                    className="text-sm text-brand hover:text-brand-dark font-medium flex items-center gap-1 transition"
                  >
                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                    </svg>
                    Compare All Levels
                  </button>
                </div>
                <p className="text-sm text-neutral-500">Please select a level (click the info icon to see benefits)</p>

                <div className="grid sm:grid-cols-2 gap-3">
                  {TIERS.map((tier) => {
                    const tierData = TIER_BENEFITS[tier];
                    const isActive = selectedTier === tier;
                    return (
                      <div key={tier} className="space-y-2">
                        <button
                          type="button"
                          onClick={() => resetTierExtras(tier)}
                          className={[
                            "group relative w-full rounded-xl border p-4 text-left transition bg-white",
                            isActive ? "border-brand ring-2 ring-brand/20" : "border-neutral-200 hover:border-brand/50",
                          ].join(" ")}
                        >
                          <div className="flex items-center justify-between gap-2">
                            <div className="flex items-center gap-3">
                              <div className={[
                                "w-5 h-5 rounded-full border-2 flex items-center justify-center transition",
                                isActive ? "border-brand bg-brand" : "border-neutral-300"
                              ].join(" ")}>
                                {isActive && <div className="w-2 h-2 rounded-full bg-white"></div>}
                              </div>
                              <div>
                                <div className="font-medium text-brand-ink">{tier}</div>
                                <div className="text-sm text-neutral-500">
                                  {tierData.customAmount ? 'Custom amount' :
                                   tierData.perTicket ? `${currency(tierData.amount)} per ticket` :
                                   currency(tierData.amount)}
                                </div>
                              </div>
                            </div>
                            {/* Info icon to open slide panel */}
                            <button
                              type="button"
                              onClick={(e) => { e.stopPropagation(); setShowBenefits(tier); }}
                              className="p-1.5 rounded-full hover:bg-neutral-100 transition text-neutral-400 hover:text-brand"
                              title="View benefits"
                            >
                              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                              </svg>
                            </button>
                          </div>
                        </button>

                        {/* Quantity input for Individual Ticket */}
                        {tier === 'Individual Ticket' && isActive && (
                          <div className="ml-8 flex items-center gap-3">
                            <label className="text-sm text-neutral-600">Number of tickets:</label>
                            <input
                              type="number"
                              min={1}
                              value={ticketQty}
                              onChange={(e) => setTicketQty(Math.max(1, Number(e.target.value || 1)))}
                              className="w-20 rounded-lg border border-neutral-300 px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                            />
                            <span className="text-sm text-neutral-500">= {currency(tierData.amount * ticketQty)}</span>
                          </div>
                        )}

                        {/* Amount input for Donation */}
                        {tier === 'Donation' && isActive && (
                          <div className="ml-8 flex items-center gap-2">
                            <label className="text-sm text-neutral-600">Amount:</label>
                            <div className="flex items-center rounded-lg border border-neutral-300 overflow-hidden focus-within:ring-2 focus-within:ring-brand">
                              <span className="px-3 py-1.5 text-sm bg-neutral-100 border-r border-neutral-300">$</span>
                              <input
                                type="text"
                                inputMode="decimal"
                                placeholder="0"
                                value={donationAmount}
                                onChange={(e) => setDonationAmount(e.target.value)}
                                className="w-32 px-3 py-1.5 text-sm outline-none"
                              />
                            </div>
                          </div>
                        )}
                      </div>
                    );
                  })}
                </div>
              </section>

              {/* Contact Details */}
              <section className="space-y-4">
                <h2 className="text-lg font-semibold text-brand-ink">Sponsor Contact Details</h2>

                <div className="space-y-4">
                  <div>
                    <label className="text-sm text-neutral-700">Company / Organization *</label>
                    <input
                      type="text"
                      value={companyOrg}
                      onChange={handleCompanyChange}
                      className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                      required
                    />
                  </div>

                  <div>
                    <label className="text-sm text-neutral-700">Sponsorship Name (as you would like it to appear in event materials) *</label>
                    <input
                      type="text"
                      value={sponsorshipName}
                      onChange={handleSponsorshipNameChange}
                      placeholder="Defaults to Company/Organization name"
                      className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                      required
                    />
                  </div>

                  <div className="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label className="text-sm text-neutral-700">Primary Contact *</label>
                      <input
                        type="text"
                        value={primaryContact}
                        onChange={(e) => setPrimaryContact(e.target.value)}
                        className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                        required
                      />
                    </div>
                    <div>
                      <label className="text-sm text-neutral-700">Title</label>
                      <input
                        type="text"
                        value={title}
                        onChange={(e) => setTitle(e.target.value)}
                        className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                      />
                    </div>
                  </div>

                  <div>
                    <label className="text-sm text-neutral-700">Street Address *</label>
                    <input
                      type="text"
                      value={streetAddress}
                      onChange={(e) => setStreetAddress(e.target.value)}
                      className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                      required
                    />
                  </div>

                  <div className="grid sm:grid-cols-3 gap-4">
                    <div>
                      <label className="text-sm text-neutral-700">City *</label>
                      <input
                        type="text"
                        value={city}
                        onChange={(e) => setCity(e.target.value)}
                        className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                        required
                      />
                    </div>
                    <div>
                      <label className="text-sm text-neutral-700">State *</label>
                      <select
                        value={state}
                        onChange={(e) => setState(e.target.value)}
                        className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand bg-white"
                        required
                      >
                        <option value="">Select...</option>
                        {US_STATES.map(s => <option key={s} value={s}>{s}</option>)}
                      </select>
                    </div>
                    <div>
                      <label className="text-sm text-neutral-700">Zip *</label>
                      <input
                        type="text"
                        value={zip}
                        onChange={(e) => setZip(e.target.value)}
                        className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                        required
                      />
                    </div>
                  </div>

                  <div className="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label className="text-sm text-neutral-700">Email *</label>
                      <input
                        type="email"
                        value={email}
                        onChange={(e) => setEmail(e.target.value)}
                        onBlur={handleBlur('email')}
                        className={[
                          "mt-1 w-full rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand",
                          touchedFields.email && email && !emailValid ? "border-red-400" : "border-neutral-300"
                        ].join(" ")}
                        required
                      />
                      {touchedFields.email && email && !emailValid && (
                        <p className="mt-1 text-xs text-red-500">Please enter a valid email</p>
                      )}
                    </div>
                    <div>
                      <label className="text-sm text-neutral-700">Phone *</label>
                      <input
                        type="tel"
                        value={phone}
                        onChange={handlePhoneChange}
                        onBlur={handleBlur('phone')}
                        placeholder="(555) 555-5555"
                        className={[
                          "mt-1 w-full rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand",
                          touchedFields.phone && phone && !phoneValid ? "border-red-400" : "border-neutral-300"
                        ].join(" ")}
                        required
                      />
                      {touchedFields.phone && phone && !phoneValid && (
                        <p className="mt-1 text-xs text-red-500">Please enter a valid phone number</p>
                      )}
                    </div>
                  </div>

                  <hr className="my-4" />

                  <p className="text-sm text-neutral-500">Payment Contact (optional - if different from primary contact)</p>
                  <div className="grid sm:grid-cols-2 gap-4">
                    <div>
                      <label className="text-sm text-neutral-700">Contact for Payment (Name)</label>
                      <input
                        type="text"
                        value={paymentContactName}
                        onChange={(e) => setPaymentContactName(e.target.value)}
                        className="mt-1 w-full rounded-lg border border-neutral-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand"
                      />
                    </div>
                    <div>
                      <label className="text-sm text-neutral-700">Contact for Payment (Email)</label>
                      <input
                        type="email"
                        value={paymentContactEmail}
                        onChange={(e) => setPaymentContactEmail(e.target.value)}
                        onBlur={handleBlur('paymentEmail')}
                        className={[
                          "mt-1 w-full rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand",
                          touchedFields.paymentEmail && paymentContactEmail && !paymentEmailValid ? "border-red-400" : "border-neutral-300"
                        ].join(" ")}
                      />
                      {touchedFields.paymentEmail && paymentContactEmail && !paymentEmailValid && (
                        <p className="mt-1 text-xs text-red-500">Please enter a valid email</p>
                      )}
                    </div>
                  </div>
                </div>
              </section>

              {/* Payment Option */}
              <section className="space-y-4">
                <h2 className="text-lg font-semibold text-brand-ink">Payment Information</h2>
                <p className="text-sm text-neutral-600">
                  Upon completion of this form, you will receive email confirmation from our Bridges Gala team about options for submitting payment. Please select your preferred payment option:
                </p>

                <div className="space-y-2">
                  {PAYMENT_OPTIONS.map((opt) => (
                    <label
                      key={opt.id}
                      className={[
                        "flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition",
                        paymentOption === opt.id ? "border-brand bg-brand/5" : "border-neutral-200 hover:border-brand/50"
                      ].join(" ")}
                    >
                      <input
                        type="radio"
                        name="paymentOption"
                        value={opt.id}
                        checked={paymentOption === opt.id}
                        onChange={(e) => setPaymentOption(e.target.value)}
                        className="w-4 h-4 text-brand focus:ring-brand"
                      />
                      <span className="text-sm text-brand-ink">{opt.label}</span>
                    </label>
                  ))}
                </div>
              </section>

              {/* Pledge Summary */}
              {selectedTier && totalAmount > 0 && (
                <section className="space-y-4">
                  <h2 className="text-lg font-semibold text-brand-ink">Pledge Summary</h2>
                  <div className="bg-neutral-50 rounded-xl border border-neutral-200 p-4 space-y-3">
                    <div className="flex justify-between items-center">
                      <span className="text-neutral-600">Sponsorship Level:</span>
                      <span className="font-medium text-brand-ink">{selectedTier}</span>
                    </div>
                    {selectedTier === 'Individual Ticket' && (
                      <div className="flex justify-between items-center">
                        <span className="text-neutral-600">Number of Tickets:</span>
                        <span className="font-medium text-brand-ink">{ticketQty}</span>
                      </div>
                    )}
                    <div className="flex justify-between items-center pt-2 border-t border-neutral-200">
                      <span className="text-neutral-700 font-medium">Total Pledge Amount:</span>
                      <span className="text-xl font-semibold text-brand">{currency(totalAmount)}</span>
                    </div>
                    {companyOrg && (
                      <div className="flex justify-between items-center pt-2 border-t border-neutral-200">
                        <span className="text-neutral-600">Company / Organization:</span>
                        <span className="font-medium text-brand-ink">{companyOrg}</span>
                      </div>
                    )}
                    {sponsorshipName && (
                      <div className="flex justify-between items-center">
                        <span className="text-neutral-600">Sponsorship Name:</span>
                        <span className="font-medium text-brand-ink">{sponsorshipName}</span>
                      </div>
                    )}
                    {paymentOption && (
                      <div className="flex justify-between items-center">
                        <span className="text-neutral-600">Payment Method:</span>
                        <span className="font-medium text-brand-ink">
                          {PAYMENT_OPTIONS.find(o => o.id === paymentOption)?.label.split(' (')[0] || paymentOption}
                        </span>
                      </div>
                    )}
                  </div>
                </section>
              )}

              {/* Submit */}
              <div className="pt-4">
                {submitError && (
                  <div className="mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-sm text-red-600">
                    {submitError}
                  </div>
                )}

                <button
                  type="submit"
                  disabled={!canSubmit || isSubmitting}
                  className={[
                    "w-full sm:w-auto rounded-xl px-8 py-3 text-sm font-semibold flex items-center justify-center gap-2 transition",
                    canSubmit && !isSubmitting ? "bg-brand text-white hover:bg-brand-dark" : "bg-neutral-300 text-neutral-500 cursor-not-allowed"
                  ].join(" ")}
                >
                  {isSubmitting && (
                    <svg className="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
                      <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                      <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                  )}
                  {isSubmitting ? "Submitting..." : "Submit Pledge"}
                </button>

                {!canSubmit && !isSubmitting && (
                  <p className="mt-2 text-sm text-neutral-500">
                    {!selectedTier ? "Select a sponsorship level" :
                     totalAmount <= 0 && selectedTier === 'Donation' ? "Enter an amount" :
                     !companyOrg || !sponsorshipName || !primaryContact || !streetAddress || !city || !state || !zip || !email || !phone ? "Fill in all required fields" :
                     !emailValid || !phoneValid ? "Fix validation errors above" :
                     !paymentOption ? "Select a payment option" : ""}
                  </p>
                )}

                <p className="mt-4 text-xs text-neutral-500">
                  If you have questions, please contact our Bridges Gala Team at{' '}
                  <a href="mailto:BridgesGala@orrgroup.com" className="text-brand hover:underline">BridgesGala@orrgroup.com</a>
                  {' '}or <a href="tel:+12027198053" className="text-brand hover:underline">(202) 719-8053</a>.
                </p>
              </div>
            </form>
          </div>

          {/* Footer */}
          <div className="mt-8 text-center text-xs text-neutral-500">
            <p>Bridges from School to Work is a not-for-profit organization under section 501(c)(3) of the Internal Revenue Code.</p>
            <p>Federal ID # 52-1655740</p>
          </div>
        </main>

        <footer className="border-t border-neutral-200 bg-white mt-12">
          <div className="max-w-6xl mx-auto px-4 py-6 text-xs text-neutral-600 flex items-center gap-3">
            <img
              src="https://bridgeshq.blob.core.windows.net/logo/Bridges-Logo-MarriottTagline.png"
              alt="Bridges from School to Work"
              className="h-6 w-auto"
            />
            <p>Questions? Contact <a className="underline decoration-brand/50 underline-offset-4 hover:text-brand" href="mailto:BridgesGala@orrgroup.com">BridgesGala@orrgroup.com</a></p>
          </div>
        </footer>

        {/* Slide-out Benefits Panel */}
        <div
          className={`slide-overlay fixed inset-0 bg-black/30 z-40 ${showBenefits ? 'open' : ''}`}
          onClick={() => setShowBenefits(null)}
        />
        <div className={`slide-panel fixed top-0 right-0 h-full w-full max-w-md bg-white shadow-2xl z-50 ${showBenefits ? 'open' : ''}`}>
          {showBenefits && TIER_BENEFITS[showBenefits] && (
            <div className="h-full flex flex-col">
              {/* Panel Header */}
              <div className="flex items-center justify-between p-6 border-b border-neutral-200 bg-brand text-white">
                <div>
                  <h3 className="text-xl font-semibold">{showBenefits}</h3>
                  <p className="text-sm text-white/80 mt-1">
                    {TIER_BENEFITS[showBenefits].customAmount ? 'Custom amount' :
                     TIER_BENEFITS[showBenefits].perTicket ? `${currency(TIER_BENEFITS[showBenefits].amount)} per ticket` :
                     currency(TIER_BENEFITS[showBenefits].amount)}
                  </p>
                </div>
                <button
                  type="button"
                  onClick={() => setShowBenefits(null)}
                  className="p-2 rounded-full hover:bg-white/20 transition"
                >
                  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              </div>

              {/* Panel Content */}
              <div className="flex-1 overflow-y-auto p-6">
                <h4 className="text-sm font-semibold text-neutral-500 uppercase tracking-wide mb-4">Benefits Include</h4>
                <ul className="space-y-3">
                  {TIER_BENEFITS[showBenefits].benefits.map((benefit, i) => (
                    <li key={i} className="flex items-start gap-3">
                      <div className="mt-0.5 flex-shrink-0 w-5 h-5 rounded-full bg-brand/10 flex items-center justify-center">
                        <svg className="w-3 h-3 text-brand" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                        </svg>
                      </div>
                      <span className="text-neutral-700">{benefit}</span>
                    </li>
                  ))}
                </ul>
              </div>

              {/* Panel Footer */}
              <div className="p-6 border-t border-neutral-200 bg-neutral-50">
                <button
                  type="button"
                  onClick={() => {
                    resetTierExtras(showBenefits);
                    setShowBenefits(null);
                  }}
                  className="w-full rounded-xl bg-brand text-white py-3 font-semibold hover:bg-brand-dark transition"
                >
                  Select {showBenefits}
                </button>
                <button
                  type="button"
                  onClick={() => setShowBenefits(null)}
                  className="w-full mt-2 rounded-xl border border-neutral-300 text-neutral-600 py-3 font-medium hover:bg-neutral-100 transition"
                >
                  Close
                </button>
              </div>
            </div>
          )}
        </div>

        {/* Comparison Modal */}
        {showComparison && (
          <>
            <div
              className="fixed inset-0 bg-black/50 z-50"
              onClick={() => setShowComparison(false)}
            />
            <div className="fixed inset-4 sm:inset-8 md:inset-12 bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden">
              {/* Modal Header */}
              <div className="flex items-center justify-between p-4 sm:p-6 border-b border-neutral-200 bg-brand text-white">
                <h3 className="text-lg sm:text-xl font-semibold">Compare Sponsorship Levels</h3>
                <button
                  type="button"
                  onClick={() => setShowComparison(false)}
                  className="p-2 rounded-full hover:bg-white/20 transition"
                >
                  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              </div>

              {/* Modal Content - Scrollable Table */}
              <div className="flex-1 overflow-auto p-4 sm:p-6">
                <div className="min-w-[800px]">
                  <table className="w-full text-sm">
                    <thead>
                      <tr className="border-b-2 border-neutral-200">
                        <th className="text-left py-3 px-2 font-semibold text-neutral-700 sticky left-0 bg-white">Benefit</th>
                        {TIERS.filter(t => t !== 'Donation').map(tier => (
                          <th key={tier} className="text-center py-3 px-2 font-semibold text-neutral-700 min-w-[100px]">
                            <div>{tier}</div>
                            <div className="text-xs font-normal text-neutral-500 mt-1">
                              {TIER_BENEFITS[tier].perTicket
                                ? `${currency(TIER_BENEFITS[tier].amount)}/ea`
                                : currency(TIER_BENEFITS[tier].amount)}
                            </div>
                          </th>
                        ))}
                      </tr>
                    </thead>
                    <tbody>
                      {/* Guest accommodations rows */}
                      <tr className="border-b border-neutral-100 bg-neutral-50">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-neutral-50">VIP Reception Guests</td>
                        <td className="text-center py-3 px-2">30</td>
                        <td className="text-center py-3 px-2">20</td>
                        <td className="text-center py-3 px-2">10</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-white">General Reception Guests</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">10</td>
                        <td className="text-center py-3 px-2">10</td>
                        <td className="text-center py-3 px-2">1</td>
                      </tr>
                      <tr className="border-b border-neutral-100 bg-neutral-50">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-neutral-50">Dinner Guests</td>
                        <td className="text-center py-3 px-2">30</td>
                        <td className="text-center py-3 px-2">20</td>
                        <td className="text-center py-3 px-2">10</td>
                        <td className="text-center py-3 px-2">10</td>
                        <td className="text-center py-3 px-2">10</td>
                        <td className="text-center py-3 px-2">1</td>
                      </tr>
                      <tr className="border-b border-neutral-100">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-white">Premier Seating</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      {/* Recognition rows */}
                      <tr className="border-b border-neutral-100 bg-neutral-50">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-neutral-50">Registration Signage</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-white">VIP Reception Signage</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100 bg-neutral-50">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-neutral-50">General Reception Signage</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-white">Stage Recognition</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100 bg-neutral-50">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-neutral-50">Digital Display Logo</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-white">Table Logo Display</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100 bg-neutral-50">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-neutral-50">Pre-Event Spotlight</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-white">Invitation & Program</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100 bg-neutral-50">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-neutral-50">Website Logo</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-white">Social Media Recognition</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100 bg-neutral-50">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-neutral-50">Meet & Greet VIPs</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                      <tr className="border-b border-neutral-100">
                        <td className="py-3 px-2 font-medium sticky left-0 bg-white">Gala Committee Listing</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2 text-brand">&#10003;</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                        <td className="text-center py-3 px-2">-</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              {/* Modal Footer */}
              <div className="p-4 sm:p-6 border-t border-neutral-200 bg-neutral-50">
                <button
                  type="button"
                  onClick={() => setShowComparison(false)}
                  className="w-full sm:w-auto rounded-xl bg-brand text-white px-8 py-3 font-semibold hover:bg-brand-dark transition"
                >
                  Close
                </button>
              </div>
            </div>
          </>
        )}
      </div>
    );
  }

  const root = ReactDOM.createRoot(document.getElementById("root"));
  root.render(<SponsorPledgeForm />);
</script>
</body>
</html>
